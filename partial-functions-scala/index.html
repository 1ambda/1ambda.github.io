
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Partial Functions, Scala</title>
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Partial Functions, Scala">
  <meta name="twitter:description" content="Case? case 는 match 가 없어도 쓰일 수 있다. 예를 들어 val m1 = Map(1 -&gt; " one m1 foreach case v println function scala doc scala.collection.immutable.map>
  <meta name="twitter:creator" content="@yourTwitterUsername">
  <meta name="twitter:image" content="">
  <meta name="twitter:url" content="http://1ambda.github.io/partial-functions-scala/">
  <meta name="twitter:domain" content="http://1ambda.github.io">


  <link rel="author" href="https://plus.google.com/101105410053351451441?rel=author">

  <link rel="shortcut icon" href="../favicon.ico">

  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:600,300">
  <link rel="stylesheet" type="text/css" href="../assets/stylesheets/xpressio.css">
  <link rel="stylesheet" type="text/css" href="../assets/1ambda/1ambda.css">
  <script type="text/javascript" src="../assets/1ambda/modernizr.js">
  </script>
  <script type="text/javascript" src="../assets/1ambda/detectizr.min.js">
  </script>

  <!--load css if windows -->
  <script type="text/javascript">
    if (Modernizr.windows) {
      file = location.pathname.split( "/" ).pop();
      link = document.createElement( "link" );
      link.href = "/assets/1ambda/1ambda_windows.css";
      link.type = "text/css";
      link.rel = "stylesheet";
      link.media = "screen,print";
      document.getElementsByTagName("head")[0].appendChild( link );
    }
  </script>


  <link rel="stylesheet" href="../assets/highlight/styles/github.css">
<script src="../assets/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  <link rel="canonical" href="http://1ambda.github.io/partial-functions-scala/">
    <meta name="referrer" content="origin">
    
    <meta property="og:site_name" content="Old Lisper">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Partial Functions, Scala">
    <meta property="og:description" content='Case? case 는 match 가 없어도 쓰일 수 있다. 예를 들어 val m1 = Map(1 -&amp;gt; "one", 2 -&amp;gt; "two")   m1 foreach { case(k, v) =&amp;gt; println(s"k -&amp;gt; v" }   사실, case 가 들어간 문장은 function...'>
    <meta property="og:url" content="http://1ambda.github.io/partial-functions-scala/">
    <meta property="article:published_time" content="2014-10-03T16:28:12.765Z">
    <meta property="article:modified_time" content="2014-10-03T17:02:21.872Z">
    <meta property="article:tag" content="scala">
    <meta property="article:tag" content="partial function">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Partial Functions, Scala">
    <meta name="twitter:description" content='Case? case 는 match 가 없어도 쓰일 수 있다. 예를 들어 val m1 = Map(1 -&amp;gt; "one", 2 -&amp;gt; "two")   m1 foreach { case(k, v) =&amp;gt; println(s"k -&amp;gt; v" }   사실, case 가 들어간 문장은 function...'>
    <meta name="twitter:url" content="http://1ambda.github.io/partial-functions-scala/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Old Lisper",
    "author": {
        "@type": "Person",
        "name": "1ambda",
        "image": "//www.gravatar.com/avatar/aa2032ba2302419e3c2ede54f1fbf687?d=404&s=250",
        "url": "http://1ambda.github.io/author/1ambda",
        "sameAs": "http://1ambda.github.io",
        "description": "Functional, Scala, Akka, Rx and Haskell"
    },
    "headline": "Partial Functions, Scala",
    "url": "http://1ambda.github.io/partial-functions-scala/",
    "datePublished": "2014-10-03T16:28:12.765Z",
    "dateModified": "2014-10-03T17:02:21.872Z",
    "keywords": "scala, partial function",
    "description": "Case? case 는 match 가 없어도 쓰일 수 있다. 예를 들어 val m1 = Map(1 -&amp;gt; &quot;one&quot;, 2 -&amp;gt; &quot;two&quot;)   m1 foreach { case(k, v) =&amp;gt; println(s&quot;k -&amp;gt; v&quot; }   사실, case 가 들어간 문장은 function..."
}
    </script>

    <meta name="generator" content="Ghost 0.6">
    <link rel="alternate" type="application/rss+xml" title="Old Lisper" href="http://1ambda.github.io/rss/">

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52181619-1', '1ambda.github.io');
  ga('send', 'pageview');
</script>
  
</head>
<body>

  <script src="../public/jquery.js?v=1d8e3b39d8"></script>

  
<header class="site_width text center padding_top_big margin_bottom_big">
  
  <h1 class="blog_title margin_bottom_small"><a href="http://1ambda.github.io">Old Lisper</a></h1>
  <h4 class="text book">Functional Programming World</h4>
  <div class="social border solid top_small bottom_small padding_medium">
  <h6 class="text book color c_black_medium without_margin padding_right_big"><a href="http://1ambda.github.io/articles/"><i class="fa fa-columns"></i> <span class="margin_lefarticlest_small desktop">Article</span></a></h6>
  <h6 class="text book color c_black_medium without_margin padding_right_big"><a href="http://kr.linkedin.com/in/1ambda" target="_blank"><i class="fa fa-linkedin-square"></i> <span class="margin_left_small desktop">Linkedin</span></a></h6>
  <h6 class="text book color c_black_medium without_margin"><a href="http://github.com/1ambda" target="_blank"><i class="fa fa-github"></i> <span class="margin_left_small desktop">GitHub</span></a></h6>
</div>
</header>

<main class="site_width" role="main">
  <article class="post tag-scala tag-partial-function">


    <header class="text center margin_bottom_medium">
      <h5 class="text book small uppercase color c_black_light margin_bottom_small">Posted in <a href="../tag/scala/">scala</a>, <a href="http://127.0.0.1:2368/tag/partial-function/">partial function</a></h5>
      <h1 class="margin_bottom_medium">Partial Functions, Scala</h1>
      <h5 class="text book small uppercase color c_black_light margin_bottom_small"><time datetime="2014-10-04">Saturday, October 04, 2014</time>
      <br><br>
       <a href="http://1ambda.github.io/partial-functions-scala/#disqus_thread">Comment</a>
      </h5>
    </header>

    <section>
      <h3 id="case">Case?</h3>

<p><code>case</code> 는 <code>match</code> 가 없어도 쓰일 수 있다. 예를 들어</p>

<pre><code class="scala">val m1 = Map(1 -&gt; "one", 2 -&gt; "two")  
m1 foreach { case(k, v) =&gt; println(s"k -&gt; v" }  
</code></pre>

<p>사실, <code>case</code> 가 들어간 문장은 <code>function</code> 이다. Scala Doc 을 보면, <code>scala.collection.immutable.Map</code> 의 <code>foreach</code> 는 다음처럼 정의되어 있다.</p>

<pre><code class="scala">def foreach(f: ((A, B)) =&gt; Unit): Unit  
</code></pre>

<h3 id="mapvscollect">Map vs Collect</h3>

<p>여기 재미난 예제가 하나 더 있다. <code>map</code> 과 <code>collect</code> 가 서로 다른 결과를 보여준다.</p>

<pre><code class="scala">scala &gt; val l = List(490, "Nexus5")  
scala &gt; l map { case i: Int =&gt; i * 1000 }

scala.MatchError: Nexus5 (of class java.lang.String)  
  at $anonfun$1.apply(&lt;console&gt;:9)
  at $anonfun$1.apply(&lt;console&gt;:9)
  at scala.collection.immutable.List.map(List.scala:276)
</code></pre>

<p>문자열인 <code>"Nexus5"</code> 를 만나면 <code>MatchError</code> 가 발생한다. 반면 <code>collect</code> 는 </p>

<pre><code class="scala">scala &gt; val l = List(490, "Nexus5")  
scala &gt; l collect { case i: Int =&gt; i * 1000 }  
res11: List[Int] = List(49000)  
</code></pre>

<p>왜 그럴까? <code>scala.collection.immutable.List</code> 의 <code>collect</code> 정의를 한번 보자.</p>

<pre><code class="scala">def collect[B](pf: PartialFunction[A, B]): Map[B]  
</code></pre>

<p><code>function</code> 이 아니고 <code>PartialFunction</code> 을 취한다.</p>

<h3 id="partialfunction">Partial Function</h3>

<p><em>Partial Function</em> 을 이해하는 쉬운 방법은, 일반 <em>Function</em> 을 <em>Total Function</em> 으로 이해하면 된다. 즉, 일반 <em>Function</em> 이 주어진 인자에 대해 모든 값을 취한다면, <em>Partial Function</em> 은 주어진 타입에 대해서 특정 값만 취할 수 있다. Scala School 의 원문을 첨부하면</p>

<blockquote>
  <p>A function works for every argument of the defined type. In other words, a function defined as (Int) =&gt; String takes any Int and returns a String.
   <br>
  A Partial Function is only defined for certain values of the defined type. A Partial Function (Int) =&gt; String might not accept every Int.
  <br></p>
</blockquote>

<pre><code class="scala">val onlyOne : PartialFunction[Int, String] = { case 1 =&gt; "one" }

onlyOne.isDefinedAt(1) // true  
onlyOne.isDefinedAt(2) // false  
</code></pre>

<p><code>onlyOne</code> 은 <code>Int</code> 를 인자로 받지만, 그 중에서도 <code>1</code> 만 취해 <code>"one"</code> 을 돌려주는 <code>PartialFunction[Int, String]</code> 이다.</p>

<p><code>PartialFunction</code> 또한 compose 될 수 있다.</p>

<pre><code class="scala">val onlyOne : PartialFunction[Int, String] = { case 1 =&gt; "one" }  
val onlyTwo : PartialFunction[Int, String] = { case 2 =&gt; "two" }  
val wildcard : PartialFunction[Int, String] = { case _ =&gt; "else" }

val partial = onlyOne orElse onlyTwo orElse wildcard  
</code></pre>

<h3 id="case">Case!</h3>

<p>처음엔 <code>case</code> 가 <code>Function</code> 을 만든다고 했지만, 사실 <code>PartialFunction</code> 을 정의한다. <code>map</code> 나 <code>filter</code> 는 <code>Function</code> 을 받지만, <code>PartialFunction</code> 은 <code>Function</code> 의 subtype 이므로 파라미터로 넘겨줄 수 있다.</p>

<pre><code class="scala">case class Car(model: String, price: Int)

val list = List(Car("H", 3000), Car("A", 2800))

list filter { case Car(model, price) =&gt; price &lt; 2900 }

// List[Car] = List(Car("A", 2800))
</code></pre>

<h3 id="references">References</h3>

<p>(1) <a href="http://blog.bruchez.name/2011/10/scala-partial-functions-without-phd.html">http://blog.bruchez.name/2011/10/scala-partial-functions-without-phd.html</a> <br>
(2) <a href="https://twitter.github.io/scala_school/pattern-matching-and-functional-composition.html">https://twitter.github.io/scala_school/pattern-matching-and-functional-composition.html</a></p>
    </section>

    <footer>
      <section class="author_info margin_top_big">
        <div class="alignleft border rad_circle" style="height: 87px; width: 87px; background-image: url(http://www.gravatar.com/avatar/aa2032ba2302419e3c2ede54f1fbf687?d=404&amp;s=250); background-size: cover;"></div>
        <p class="margin_left_medium text small">Author</p>
        <p class="margin_left_medium text bold"><a href="http://1ambda.github.io">1ambda</a></p>
        <p class="margin_left_medium text small">Functional, Scala, Akka, Rx and Haskell</p>
      </section>
    </footer>


    <div id="disqus_thread" class="margin_top_big"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = '1ambda'; // required: replace example with your forum shortname
  var disqus_identifier = '35';
  var disqus_url = 'http://1ambda.github.io/partial-functions-scala/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
    </article>
</main>


  <script src="../assets/fitvids/jquery.fitvids.js"></script>
<script>
$(document).ready(function(){
  // Target your .container, .wrapper, .post, etc.
  $("section").fitVids();
});
</script>

  <footer class="blog_info margin_top_big padding_medium text center">
    <h5 class="text book small">© 2015 <a href="../">Old Lisper</a>. All rights reserved.</h5>
    <h5 class="text book small"><a href="https://github.com/dreyacosta/velox" target="_blank" class="text bold">Velox theme</a> by <a href="http://dreyacosta.com/">David Rey</a></h5>
    <h5 class="text book small">Proudly published with <a href="http://ghost.org"><span>Ghost</span></a></h5>

  </footer>

  <script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = '1ambda'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
 var s = document.createElement('script'); s.async = true;
 s.type = 'text/javascript';
 s.src = '//' + disqus_shortname + '.disqus.com/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>


  </body>
  