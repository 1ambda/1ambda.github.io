<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Pattern Discovery 1</title>
  <meta name="description" content="" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Pattern Discovery 1">
  <meta name="twitter:description" content=" Patterns represent intrinsic and important properties of datasets. Pattern discovery is uncovering patterns (inherent regularities) from massive data sets  What products were often purchased together? What are the subsequent purchases after buying an iPad? Support, Confidence ;; item bought Beer, Nut, Diaper   Beer, Coffee, Diaper   Beer, Diaper, Eggs   Nuts, Eggs, Milk">
  <meta name="twitter:creator" content="@yourTwitterUsername">
  <meta name="twitter:image" content="">
  <meta name="twitter:url" content="http://1ambda.github.io/pattern-discovery-1/">
  <meta name="twitter:domain" content="http://1ambda.github.io">

  

  <link rel="author" href="https://plus.google.com/101105410053351451441?rel=author" />

  <link rel="shortcut icon" href="../favicon.ico">

  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif" />
  <link rel='stylesheet' type='text/css' href="http://fonts.googleapis.com/css?family=Open+Sans:600,300" />
  <link rel="stylesheet" type="text/css" href="../assets/stylesheets/xpressio.css" />
  <link rel="stylesheet" type="text/css" href="../assets/1ambda/1ambda.css" />
  <script type="text/javascript" src="../assets/1ambda/modernizr.js">
  </script>
  <script type="text/javascript" src="../assets/1ambda/detectizr.min.js">
  </script>

  <!--load css if windows -->
  <script type="text/javascript">
    if (Modernizr.windows) {
      file = location.pathname.split( "/" ).pop();
      link = document.createElement( "link" );
      link.href = "/assets/1ambda/1ambda_windows.css";
      link.type = "text/css";
      link.rel = "stylesheet";
      link.media = "screen,print";
      document.getElementsByTagName("head")[0].appendChild( link );
    }
  </script>


  
  <link rel="stylesheet" href="../assets/highlight/styles/github.css">
<script src="../assets/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


  <meta name="generator" content="Ghost 0.5" />
<link rel="alternate" type="application/rss+xml" title="Old Lisper" href="../rss">
<link rel="canonical" href="http://1ambda.github.io/pattern-discovery-1/" />

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52181619-1', '1ambda.github.io');
  ga('send', 'pageview');
</script>

  
</head>
<body>

  
  <script src="../public/jquery.js?v=18868da8c7"></script>

  

<header class="site_width text center padding_top_big margin_bottom_big">
  
  <h1 class="blog_title margin_bottom_small"><a href="http://1ambda.github.io">Old Lisper</a></h1>
  <h4 class="text book">Functional Programming</h4>
  
  <div class="social border solid top_small bottom_small padding_medium">
  <h6 class="text book color c_black_medium without_margin padding_right_big"><a href="/about-me"><i class="fa fa-user"></i> <span class="margin_left_small desktop">About me</span></a></h6>
  <h6 class="text book color c_black_medium without_margin padding_right_big"><a href="http://kr.linkedin.com/in/1ambda" target="_blank"><i class="fa fa-linkedin-square"></i> <span class="margin_left_small desktop">Linkedin</span></a></h6>
  <h6 class="text book color c_black_medium without_margin"><a href="http://github.com/1ambda" target="_blank"><i class="fa fa-github"></i> <span class="margin_left_small desktop">GitHub</span></a></h6>
</div>

</header>

<main class="site_width" role="main">
  <article class="post tag-coursera tag-pattern-discovery">

    

    <header class="text center margin_bottom_medium">
      <h5 class="text book small uppercase color c_black_light margin_bottom_small">Posted in <a href="../tag/coursera">coursera</a>, <a href="../tag/pattern-discovery">pattern discovery</a></h5>
      <h1 class="margin_bottom_medium">Pattern Discovery 1</h1>
      <h5 class="text book small uppercase color c_black_light margin_bottom_small"><time datetime="2015-02-12">Thursday, February 12, 2015</time>
      <br/><br/>
       <a href="http://1ambda.github.io/pattern-discovery-1/#disqus_thread">Comment</a>
      </h5>
    </header>

    <section>
      <p><img src="https://m1.behance.net/rendition/modules/7116731/disp/d18c13cd5b49bf40b41e6ef0610b26d3.png" alt="" /></p>

<p><strong>Patterns represent intrinsic and important properties of datasets</strong>. Pattern discovery is uncovering patterns (inherent regularities) from massive data sets </p>

<ul>
<li>What products were often purchased together?</li>
<li>What are the subsequent purchases after buying an iPad?</li>
</ul>

<p><br/></p>

<h3 id="supportconfidence">Support, Confidence</h3>

<pre><code>;; item bought

Beer, Nut, Diaper  
Beer, Coffee, Diaper  
Beer, Diaper, Eggs  
Nuts, Eggs, Milk  
Nuts, Coffee, Diaper, Eggs, Milk  
</code></pre>

<p><em>support</em> <code>s</code> 는 전체 구매 중에서, 해당 아이템이 구매되었을 확률이다. <em>min support</em> 를 50% 로 한다면, </p>

<ul>
<li><em>freq 1-itemset:</em> Beer(60%), Nuts(60%), Diaper(80%), Eggs(60%)</li>
<li><em>freq 2-itemset:</em> {Beer, Diaper} (60%)</li>
</ul>

<p><em>confidence</em> <code>c</code> 는 <code>X</code> 가 포함되어있을때 <code>Y</code> 까지 구매되었을 조건부 확률이다. <code>c = sup(X ∪ Y) / sup(X)</code></p>

<p><em>association rule</em> 은, <em>min support</em> 와 <em>min confidence</em> 를 정해놓고, 그 이상이 되는 <em>rule</em> <code>X -&gt; Y</code> 를 찾는 것이다.</p>

<ul>
<li><code>Beer -&gt; Diaper</code> (s:60%, c:100%)</li>
<li><code>Diaper -&gt; Beer</code> (s:60%, c:75%)</li>
</ul>

<p><br/></p>

<h3 id="closedpatterns">Closed Patterns</h3>

<p>이렇게 패턴을 구하면, 다수개의 물품이 있는 <em>transaction</em> 에서는 너무 많은 패턴이 생긴다.</p>

<pre><code>;; TDB1 

T1: {a1, ..., a50}  
T2: {a1, ..., a100}  
</code></pre>

<p><em>min supoort</em> 를 <code>1</code> 이라 하면 <em>1-itemset</em>, <em>2-itemset</em>, .. <em>100-itemset</em> 처럼 <code>2^100 - 1</code> 개의 <em>sub pattern</em> 이 생긴다.</p>

<p>이 문제를 해결하기 위해 <em>lossless compression</em> 인 <em>closed pattern</em> 이란 개념을 도입해 보자.</p>

<blockquote>
  <p><strong>closed pattern:</strong> A pattern(itemset) <code>X</code> is <strong>closed</strong> if <code>X</code> is frequent, and there exists no super pattern <code>Y ⊃ X</code>, with the same support as <code>X</code></p>
</blockquote>

<p>위와 똑같은 <code>TDB</code> 에 대해 <em>closed pattern</em> 을 구하면</p>

<p><code>P1: "{a1, ..., a50}: 2" , P2: "{a1, ..., a100}: 1"</code></p>

<p><br/></p>

<p><em>closed pattern</em> 대신 <em>max pattern</em> 을 이용할 수 있다.</p>

<blockquote>
  <p><strong>max pattern:</strong> A pattern <code>X</code> is a <strong>max-pattern</strong> if <code>X</code> is frequent and there exists no frequent super-pattern <code>Y ⊃ X</code></p>
</blockquote>

<p>정의를 보면 <em>support</em> 값을 신경쓰지 않는다. 위와 같은 <code>TDB</code> 에 대해 <em>max-pattern</em> 을 찾으면</p>

<p><code>P: "{a1, ..., a100}: 1</code></p>

<p>당연히 <em>lossy compression</em> 이다. </p>

<p><br/></p>

<h3 id="downardclosureproperty">Downard Closure Property</h3>

<p><em>Apriori property</em> 라 부르기도 하는데, 핵심은 이렇다.</p>

<p><code>{beer, diaper, nuts}</code> 가 <em>frequent</em> 하면 <em>subitem</em> 인 <code>{beer diaper}</code> 는 적어도 그 만큼은 <em>frequent</em> 해야한다는 것이다.</p>

<blockquote>
  <p><em>Apriori:</em> Any subset of a frequent itemset must be frequent</p>
</blockquote>

<p>따라서 <code>S</code> 의 어떤 <em>subset</em> 도 <em>infrequent</em> 하면 <code>S</code> 가 <em>frequent</em> 할 일이 없으므로, 가지치기 할 수 있다는 것이다.</p>

<blockquote>
  <p><em>Apriori pruning principle:</em> if there is any itemset which is infreqent, its superset should not even be generated</p>
</blockquote>

<p><br/></p>

<h3 id="theapriorialgorithm">The Apriori Algorithm</h3>

<p><em>level-wise</em>, <em>candidate generation and test</em></p>

<pre><code>initially, scan DB once to get frequent 1-itemset

repeat  
  generate length-(k+1) candidate itemsets from length-k frequent itemsets
  test the candidates against DB to find frequent (k+1) itemset
  Set k := k + 1

until no frequent or candidate set can be generated  
</code></pre>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/apriori_algorithm.jpg" alt="" /></p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/apriori_example.jpg" alt="" /></p>

<p><em>apirori</em> 알고리즘이 나온 이래로, 성능을 개선하기 위한 많은 기법들이 발표됬다.</p>

<p>(1) Reduce passes of transaction database scans <br />
- partitioning
- dynamic itemset counting</p>

<p>(2) Shrink the number of candidates <br />
- Hashing
- Pruning by support lower bounding
- Sampling</p>

<p>(3) Exploring special data structures <br />
- Tree projection
- H-miner
- Hypercube decomposition</p>

<p><br/></p>

<h3 id="partitioning">Partitioning</h3>

<blockquote>
  <p><em>Theorem:</em> Any itemset that is potentially frequent in TDB must be frequent in at least one of the partitions of TDB</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/partitioning.jpg" alt="" /></p>

<p>어느 <em>local TDB</em> 에서도 <em>frequent</em> 하지 않으면 <em>global TDB</em> 에서도 <em>frequent</em> 하지 않기 때문에, <em>global</em> 에서 <em>frequent</em> 하려면  적어도 <em>partitioning</em> 된 <em>local TDB</em> 중 하나에서는 <em>frequent</em> 해야 한다.</p>

<p>따라서 <em>scan 1</em> 에서 <em>partitining</em> 하고 <em>local pattern</em> 을 찾고, <em>scan 2</em> 에서 <em>global frequent pattern</em> 을 구하면 된다. 딱 2번만 <em>TDB</em> 에 접근한다.</p>

<p><br/></p>

<h3 id="directhashingandpruning">Direct Hashing and Pruning</h3>

<p><em>DHP</em> 는 <em>candidates</em> 의 수를 줄이기 위해 사용하는 기법이다.</p>

<blockquote>
  <p><em>observation:</em> A <code>k</code>-itemset whose corresponding hashing bucket count is below the threshold cannot be frequent</p>
</blockquote>

<p>기본적인 아이디어는 <em>item</em> 이 <em>frequent</em> 하다면, <em>hashing bucket</em> 에 들어갔을때 그 <em>count</em> 값이 <em>threshold</em> 보다 높아야 한다는 것이다.</p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/DHP.jpg" alt="" /></p>

<p><br/></p>

<h3 id="verticaldataformat">Vertical Data Format</h3>

<blockquote>
  <p><em>ECLAT</em> (Equivalence Class Transformation) is a depth first search algorithm using set intersection    </p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/ECLAT.jpg" alt="" /></p>

<p><em>ECLAT</em> 은 <em>item</em> 기준으로 접근하는 방법이다. <code>t(X) = t(Y)</code> 이면 <code>X</code> 와 <code>Y</code> 가 언제나 같이 일어나고, <code>t(X) ⊂ t(Y)</code> 이면 <code>X</code> 가 있을땐 언제나 <code>Y</code> 가 있다.</p>

<p><em>diffset</em> 연산을 이용하면 공간을 많이 아낄 수 있다. <em>intersection</em> 은 교집합이므로, 공통부분과 그렇지 않은 부분이 생기는데, 다른 부분만 보관하는 것이다.</p>

<p><br/></p>

<h3 id="fpgrowth">FP Growth</h3>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/FPGrowth.jpg" alt="" /></p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/FPGrowth_example.jpg" alt="" /></p>

<p><em>FP-tree</em> 를 만들고, 이를 이용해 <em>conditinal pattern bases</em> 를 구한다.</p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/conditional_pattern_bases.jpg" alt="" /></p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/conditional_pattern_bases2.jpg" alt="" /></p>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/scaling_FPGrowth.jpg" alt="" /></p>

<p><br/></p>

<h3 id="miningclosedpattern">Mining Closed Pattern</h3>

<p><img src="https://raw.githubusercontent.com/1ambda/1ambda.github.io/master/assets/images/pattern-discovery/week1/mining_closed_pattern.jpg" alt="" /></p>

<p><em>closed pattern</em> 에 대해 쓸 수 있는 다양한 기법이 있다. <em>itemset merging</em> 도 그중 하나인데, </p>

<p><em>d-proj. db</em> 인 <code>{acef, acf}</code> 를
<em>acfd-proj. db</em> 인 <code>{e}</code> 로 바꾸어, <code>{acfd:2}</code> 를 얻을 수 있다.</p>

<p>이외에도 위 그림에 나온 많은 테크닉들이 있다.</p>

<p><br/></p>

<h3 id="refs">Refs</h3>

<p>(1) <a href="https://www.behance.net/gallery/625042/Icon-and-pattern-with-a-marketing-theme">Title image</a> <br />
(2) <em>Pattern Discovery</em>, Coursera  </p>
    </section>

    <footer>
      
      <section class="author_info margin_top_big">
        <div class="alignleft border rad_circle" style="height: 87px; width: 87px; background-image: url(http://www.gravatar.com/avatar/aa2032ba2302419e3c2ede54f1fbf687?d=404&amp;s=250); background-size: cover;"></div>
        <p class="margin_left_medium text small">Author</p>
        <p class="margin_left_medium text bold"><a href="http://language.is">1ambda</a></p>
        <p class="margin_left_medium text small">Lisp, Emacs, FP</p>
      </section>
      
    </footer>

    

    
    <div id="disqus_thread" class="margin_top_big"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = '1ambda'; // required: replace example with your forum shortname
  var disqus_identifier = '100';
  var disqus_url = 'http://1ambda.github.io/pattern-discovery-1/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

    </article>
</main>


  
  <script src="../assets/fitvids/jquery.fitvids.js"></script>
<script>
$(document).ready(function(){
  // Target your .container, .wrapper, .post, etc.
  $("section").fitVids();
});
</script>


  <footer class="blog_info margin_top_big padding_medium text center">
    <h5 class="text book small">&copy; 2015 <a href="..">Old Lisper</a>. All rights reserved.</h5>
    <h5 class="text book small"><a href="https://github.com/dreyacosta/velox" target="_blank" class="text bold">Velox theme</a> by <a href="http://dreyacosta.com/">David Rey</a></h5>
    <h5 class="text book small">Proudly published with <a href="http://ghost.org"><span>Ghost</span></a></h5>

  </footer>

  
  <script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = '1ambda'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
 var s = document.createElement('script'); s.async = true;
 s.type = 'text/javascript';
 s.src = '//' + disqus_shortname + '.disqus.com/count.js';
 (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
 }());
</script>



  </body>
  </html>
